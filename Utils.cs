using System;
using System.Collections.Generic;
using System.Threading;
using System.Media;

namespace RPG
{
    class Drawings
    {
        public static void trophy()
        {
            Console.ForegroundColor = ConsoleColor.Yellow;

            RPG.Tune.win();

            Console.WriteLine("                                                    ");
            Console.WriteLine("                                                    ");
            Console.WriteLine("                                .-=========-.       ");
            Console.WriteLine("                                \'-=======-'/       ");
            Console.WriteLine("                                _|   .=.   |_       ");
            Console.WriteLine("                               | |  {{1}}  | |      ");
            Console.WriteLine("                               |_|         |_|      ");
            Console.WriteLine("                                 |__ '`' __|        ");
            Console.WriteLine("                                   _`) (`_          ");
            Console.WriteLine("                                 _|_______|_        ");
            Console.WriteLine("                                |___________|       ");
            Console.WriteLine("                                                    ");
            Console.WriteLine("                                                    ");

            Console.ResetColor();


        }

        public static void tumb()
        {

            RPG.Tune.die();

            Console.WriteLine("                                                                                 ");
            Console.WriteLine("                                                                                 ");
            Console.WriteLine(@"                         ,,,,,,,,,,,,,,,,,,,,,,                                 ");
            Console.WriteLine(@"                        @$@M$$$$lLlllll||LllTl$MM                               ");
            Console.WriteLine(@"                      @$$@$$$$$$$@@M&$$$$Ll$$$$$g$#                             ");
            Console.WriteLine(@"                     g@$@$@$$$$@$$&$$l$@$&$$$@@$$$$$                            ");
            Console.WriteLine(@"                   S@@$@$@$$$l$&$$$&$$$$@$$M$@$$$$%@$$                          ");
            Console.WriteLine(@"                  @@$@$@$$$$$ll$l@@@$$$$@$$@$$$$$$@$$$$,                        ");
            Console.WriteLine(@"                 $@$@$$$$$$$$$$$@         ]@$$$$$$$$$$$@                        ");
            Console.WriteLine(@"                 $@$$$&$$$@$@$$$  #Mg j$@  ]@&$$$$$$$$$@                        ");
            Console.WriteLine(@"                 $@$$$$$@$@@@$$$   ']g@-   ]$$$$$$$$$$$@                        ");
            Console.WriteLine(@"                 $@$$$@$$$$$@@@@@w , , ,  @$$$$@$$$$$&$@                        ");
            Console.WriteLine(@"                 $@$$@M$$@@@$$$$@@ @u@,$@]@$$@$$$$$$$$$@                        ");
            Console.WriteLine(@"                 $@@$lT|@gg$$'j@$$$$$$$$$$$$$F$j$$$$$M$@                        ");
            Console.WriteLine(@"                 $@@lj$||$$$,g,   *g|ll@$$M   ' @ll$@l$@                        ");
            Console.WriteLine(@"                 $@@|$$l$&T|TLl$@g, '''`  ,g@$@@@jW$MW#@                        ");
            Console.WriteLine(@"                 ]@@l$WL||l&$l|@*'  ,,g,    *%@&@@gl@l$@                        ");
            Console.WriteLine(@"                 ]@@@@$$MlljC`,  @$|l$$$$%@g,  @$$%@$$$@                        ");
            Console.WriteLine(@"                 ]@$$@$l$l$$$T@g@|ll$$@$@$$@@@g@@$$$$$$@                        ");
            Console.WriteLine(@"                 ]@@@$$$$$&$@$@$$$@@@$$$@$@$$$@$@@@@@$$$                        ");
            Console.WriteLine(@"                 ]@$@$$$$$$#$$$@$$$$$$@$$$$$$$$$$$$$@@$$$@L                     ");
            Console.WriteLine(@"             @@@N@@$@@@@&$$$$$$$$@$$$@$$M$$$$$$$$@@@@@$@K,@@@@                  ");
            Console.WriteLine("                                                                                 ");
            Console.WriteLine("                                                                                 ");
        }
        public static void chess()
        {
            Console.WriteLine(@"                                                                               ");
            Console.WriteLine(@"                                                                               ");
            Console.WriteLine(@"                                                                   _:_         ");
            Console.WriteLine(@"                                                                  '-.-'        ");
            Console.WriteLine(@"                                                      ()         __.'.__       ");
            Console.WriteLine(@"                                                   .-:--:-.     |_______|      ");
            Console.WriteLine(@"                                         ()         \____/       \=====/       ");
            Console.WriteLine(@"                                         /\         {====}        )___(        ");
            Console.WriteLine(@"                           (\=,         //\\         )__(        /_____\       ");
            Console.WriteLine(@"     __       |'-'-'|     //  .\       (    )       /____\        |   |        ");
            Console.WriteLine(@"    /  \      |_____|    (( \_  \       )__(         |  |         |   |        ");
            Console.WriteLine(@"    \__/       |===|      ))  `\_)     /____\        |  |         |   |        ");
            Console.WriteLine(@"   /____\      |   |     (/     \       |  |         |  |         |   |        ");
            Console.WriteLine(@"    |  |       |   |      | _.-'|       |  |         |  |         |   |        ");
            Console.WriteLine(@"    |__|       )___(       )___(       /____\       /____\       /_____\       ");
            Console.WriteLine(@"   (====)     (=====)     (=====)     (======)     (======)     (=======)      ");
            Console.WriteLine(@"   }===={     }====={     }====={     }======{     }======{     }======={      ");
            Console.WriteLine(@"  (______)   (_______)   (_______)   (________)   (________)   (_________)     ");
            Console.WriteLine(@"                                                                               ");
            Console.WriteLine(@"                                                                               ");
        }
        public static void dragon()
        {
            Console.ForegroundColor = ConsoleColor.Red;

            Console.WriteLine(@"                                                                                     ");
            Console.WriteLine(@"                                                             ____________            ");
            Console.WriteLine(@"                                      (`-..________....---''  ____..._.-`            ");
            Console.WriteLine(@"                                       \\`._______.._,.---'''     ,'                 ");
            Console.WriteLine(@"                                        ; )`.      __..-'`-.      /                  ");
            Console.WriteLine(@"                                      / /     _.-' _,.;;._ `-._,'                    ");
            Console.WriteLine(@"                                     / /   ,-' _.-'  //   ``--._``._                 ");
            Console.WriteLine(@"                                   ,','_.-' ,-' _.- (( =-    -. `-._`-._____         ");
            Console.WriteLine(@"                                 ,;.''__..-'   _..--.\\.--'````--.._``-.`-._`.       ");
            Console.WriteLine(@"                  _          |\,' .-''        ```-'`---'`-...__,._  ``-.`-.`-.`.     ");
            Console.WriteLine(@"      _     _.-, '(__)\__)\-'' `     ___  .          `     \      `--._              ");
            Console.WriteLine(@"     ,',)---' /|)          `     `      ``-.   `     /     /     `     `-.           ");
            Console.WriteLine(@"     \_____--.  '`  `               __..-.  \     . (   < _...-----..._   `.         ");
            Console.WriteLine(@"      \_,--..__. \\ .-`.\----'';``,..-.__ \  \      ,`_. `.,-'`--'`---''`.  )        ");
            Console.WriteLine(@"                `.\`.\  `_.- ..' ,'   _, -..'  /..,-''(, ,' ; (_______`___..'__      ");
            Console.WriteLine(@"                        ((,(,__(    ((,(,__,'  ``'-- `'`.(\  `.,..______             ");
            Console.WriteLine(@"                                                           ``--------..._``--.__     ");


            Console.ResetColor();

        }
        public static void maze()
        {
            Console.ForegroundColor = ConsoleColor.DarkGreen;

            Console.WriteLine("                                                                                     ");
            Console.WriteLine("                                                                                     ");
            Console.WriteLine("    _______________________________________________________________________          ");
            Console.WriteLine("   | _____ |   | ___ | ___ ___ | |   |   | _____ |   | ___ | ___ ___ | |   | |       ");
            Console.WriteLine("   | |   | |_| |__ | |_| __|____ | | | | | |   | |_| |__ | |_| __|____ | | | |       ");
            Console.WriteLine("   | | | |_________|__ |______ |___|_| | | |   | |_| |__ | |_| __|____ | | | |       ");
            Console.WriteLine("   | |_|   | _______ |______ |   | ____| | | | |_________|__ |______ |___|_| |       ");
            Console.WriteLine("   | ___ | |____ | |______ | |_| |____ | | |_|   | _______ |______ |   | ____|       ");
            Console.WriteLine("   |___|_|____ | |   ___ | |________ | | | ___ | |____ | |______ | |_| |____ |       ");
            Console.WriteLine("   |   ________| | |__ | |______ | | | | |___|_|____ | |   ___ | |________ | |       ");
            Console.WriteLine("   | | | ________| | __|____ | | | __| | |   ________| | |__ | |______ | | | |       ");
            Console.WriteLine("   |_| |__ |   | __|__ | ____| | |_| __| | | | ________| | __|____ | | | __| |       ");
            Console.WriteLine("   |   ____| | |____ | |__ |   |__ |__ | |_| |__ |   | __|__ | ____| | |_| __|       ");
            Console.WriteLine("   | |_______|_______|___|___|___|_____|_________|_|_|_____|_|___|___|___|___|       ");
            Console.WriteLine("                                                                                     ");
            Console.WriteLine("                                                                                     ");

            Console.ResetColor();

        }
        public static void merPeople()
        {
            Console.ForegroundColor = ConsoleColor.Blue;


            Console.WriteLine("~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~- ");
            Console.WriteLine(@"                                                   .''''.                     ");
            Console.WriteLine(@".        O                                    O   /O)    './|                 ");
            Console.WriteLine(@":                                                 > ) \| .'\|                 ");
            Console.WriteLine(@"      O                             __             `....`                     ");
            Console.WriteLine(@"           /                _o8o_o888888oo                                    ");
            Console.WriteLine(@"         //|    /             o88888888 ,|                                    ");
            Console.WriteLine(@"      /o)333333//    \`.    /| `o88'88o _/                                    ");
            Console.WriteLine(@"      >3333333\\      \ `-.' |      __) \__    __                             ");
            Console.WriteLine(@"         \\|   \       `-. .-'     /       \  |||                             ");
            Console.WriteLine(@"           \              | \      / (_(_ /\ y /                              ");
            Console.WriteLine(@"                          |  \     \ /.  (  \_/              ::'  ..'         ");
            Console.WriteLine(@"                          |   \     V\____\                  ::  .::          ");
            Console.WriteLine(@"                          \    `-._/      |                   ::.:'           ");
            Console.WriteLine(@"                            \     _/     /                     :::'           ");
            Console.WriteLine(@"                             \          /                       :::           ");
            Console.WriteLine(@"                              `-..___ -'                        ::::          ");
            Console.WriteLine(@"                                                                :::::         ");
            Console.WriteLine(@"Oo0O0oo0Oo0OOo0O0oo0Oo0OOo0O0oo0Oo0OOo0O0oo0Oo0OOo0O0oo0Oo0OOo0O0oo0Oo0OOo0   ");
            Console.WriteLine("                                                                               ");
            Console.WriteLine("                                                                               ");


            Console.ResetColor();

        }
        public static void logoGame()
        {
            Console.ForegroundColor = ConsoleColor.DarkYellow;

            Console.WriteLine(@"                                                _ __                                                 ");
            Console.WriteLine(@"               ___                             | '  \                                                ");
            Console.WriteLine(@"          ___  \ /  ___         ,'\_           | .-. \        /|                                     ");
            Console.WriteLine(@"          \ /  | |,'__ \  ,'\_  |   \          | | | |      ,' |_   /|                               ");
            Console.WriteLine(@"        _ | |  | |\/  \ \ |   \ | |\_|    _    | |_| |   _ '-. .-',' |_   _                          ");
            Console.WriteLine(@"       // | |  | |____| | | |\_|| |__    //    |     | ,'_`. | | '-. .-',' `. ,'\_                   ");
            Console.WriteLine(@"       \\_| |_,' .-, _  | | |   | |\ \  //    .| |\_/ | / \ || |   | | / |\  \|   \                  ");
            Console.WriteLine(@"        `-. .-'| |/ / | | | |   | | \ \//     |  |    | | | || |   | | | |_\ || |\_|                 ");
            Console.WriteLine(@"          | |  | || \_| | | |   /_\  \ /      | |`    | | | || |   | | | .---'| |                    ");
            Console.WriteLine(@"          | |  | |\___,_\ /_\ _      //       | |     | \_/ || |   | | | |  /\| |                    ");
            Console.WriteLine(@"          /_\  | |           //_____//       .||`      `._,' | |   | | \ `-' /| |                    ");
            Console.WriteLine(@"               /_\           `------'        \ |    AND      `.\   | |  `._,' /_\                    ");
            Console.WriteLine(@"                                              \|      THE          `.\                               ");

            Console.ResetColor();
            Console.ForegroundColor = ConsoleColor.DarkGreen;

            Console.WriteLine(@"                                                          ____            __    __    ___           ");
            Console.WriteLine(@"                                                         |     _|___|_   |  \  |  \  |              ");
            Console.WriteLine(@"                                                         |     _|___|_   |\__| |\__| | ___          ");
            Console.WriteLine(@"                                                         |____  |   |    |  \  |     |___|          ");
            Console.WriteLine(@"                                                                                                     ");
            Console.WriteLine(@"                                                                                                     ");
            Console.WriteLine(@"                                                                                                     ");

            Console.ResetColor();

            RPG.Tune.themeSong();

        }

    }

    class Dice
    {
        public static int throwDice()
        {
            Random diceRandom = new Random();

            int dice = diceRandom.Next(1, 21);

            return dice;

        }

    }

    class Creations
    {
        public static Character createChar(string _name, int _idChar)
        {
            var model = new Character();
            model.idChar = _idChar + 1;
            model.name = _name;
            model.life = 8;
            model.score = 0;
            model.isAlive = true;
            model.hasMap = false;
            model.hasPotion = false;
            model.isBlocked = false;
            model.sphinxAnswer = false;
            model.hasSucceedSabotage = false;
            model.isDraw = false;
            model.house = createHouse(_idChar);

            return model;

        }
        public static House createHouse(int _idChar)
        {
            House model = new House();

            model.houseName = "Sem definição";
            model.idChar = _idChar;
            model.scoreGryffindor = 0;
            model.scoreHufflePuff = 0;
            model.scoreRavenclaw = 0;
            model.scoreSlytherin = 0;

            return model;

        }
    }

    class Update
    {
        public static Character updateChar(Character character, bool _isAlive, int _score, int _life, bool _hasMap, bool _hasPotion)
        {
            character.isAlive = _isAlive;
            character.score = _score;
            character.life = _life;
            character.hasPotion = _hasPotion;
            character.hasMap = _hasMap;

            return character;

        }

        public static House updateHouse(Character character, int _scoreGryff, int _scoreRav, int _scoreSly, int _scoreHuff)
        {
            character.house.scoreGryffindor = _scoreGryff;
            character.house.scoreRavenclaw = _scoreRav;
            character.house.scoreSlytherin = _scoreSly;
            character.house.scoreHufflePuff = _scoreHuff;

            return character.house;
        }

        public static House whatHouse(Character character)
        {

            House house = character.house;

            if (house.scoreGryffindor > house.scoreSlytherin && house.scoreGryffindor > house.scoreRavenclaw && house.scoreGryffindor > house.scoreHufflePuff)
            {

                character.house.houseName = "Grifinória";
                //Gryffindor
            }
            else if (house.scoreSlytherin > house.scoreGryffindor && house.scoreSlytherin > house.scoreRavenclaw && house.scoreSlytherin > house.scoreHufflePuff)
            {
                character.house.houseName = "Sonserina";
                //Slytherin
            }
            else if (house.scoreRavenclaw > house.scoreGryffindor && house.scoreRavenclaw > house.scoreSlytherin && house.scoreRavenclaw > house.scoreHufflePuff)
            {
                character.house.houseName = "Corvinal";
                //Ravenclaw
            }
            else
            {
                character.house.houseName = "Lufa-lufa";
                //HufflePuff
            }

            return character.house;

        }

        public static int sabotageSucceed(Character character, List<Character> listCharacter)
        {
            Console.WriteLine();
            Console.WriteLine("Pressione ENTER para ver a lista de participantes que deseja sabotar:");
            Console.ReadLine();
            RPG.Tune.enter();

            Console.WriteLine();
            Console.WriteLine(" ------------------------------------------------------------------------------- ");
            Console.WriteLine("|                                NOMES NO CÁLICE                                |");
            Console.WriteLine("|-------------------------------------------------------------------------------|");
            Console.WriteLine("                                                                                 ");

            foreach (var nomeParticipante in listCharacter)
            {
                if (character.idChar != nomeParticipante.idChar && nomeParticipante.isBlocked == false)
                {

                    Console.WriteLine($"               ({nomeParticipante.idChar}) {nomeParticipante.name}             ");

                }
            }
            Console.WriteLine("                                                                                 ");
            Console.WriteLine(" ------------------------------------------------------------------------------- ");

            Console.WriteLine();

            Console.Write("Informe sua decisão: ");

            string charChoice = Console.ReadLine();
            int number;

            while (!int.TryParse(charChoice, out number) || charChoice == "0" || number < 1)
            {
                Console.WriteLine();
                Console.WriteLine("Opção inválida, tente novamente");
                Console.WriteLine();
                Console.Write("Informe novamente a quantidade de amigos: ");
                charChoice = Console.ReadLine();
                Console.WriteLine();
                RPG.Tune.enter();
            }



            int qtdPlayers = listCharacter.Count;


            while (number > qtdPlayers || number == character.idChar)
            {
                Console.WriteLine();
                Console.WriteLine("Opção inválida, tente novamente");
                Console.WriteLine();
                Console.Write($"{character.name}, escolha novamente: ");
                number = Int32.Parse(Console.ReadLine());
                RPG.Tune.enter();
            }

            int index = number - 1;

            Console.Write($"Participante {listCharacter[index].name} foi sabotado!");
            Console.WriteLine();

            return index;

        }

        public static string spellAttack(int diceValue)
        {
            if (diceValue > 6 && diceValue < 11)
            {
                return "Wingardium Leviosa!";
            }
            else if (diceValue > 10 && diceValue < 18)
            {
                return "Expelliarmus!";
            }
            else if (diceValue > 17)
            {
                return "Sectusempra!";
            }
            else
            {
                return "e errou!";
            }
        }

        public static string spellDefense(int diceValue)
        {
            if (diceValue > 6 && diceValue < 11)
            {
                return "Protego";
            }
            else if (diceValue > 10 && diceValue < 18)
            {
                return "Protego maxima";
            }
            else if (diceValue > 17)
            {
                return "Repello Inimicum";
            }
            else
            {
                return "porém conjurou errado";
            }
        }

        public static void biggestScore(List<Character> characters)
        {
            int biggestScore = 0;

            for (int i = 0; i < characters.Count; i++)
            {

                if (biggestScore < characters[i].score && characters[i].isAlive == true)
                {
                    biggestScore = characters[i].score;
                }

            }

            var draw = characters.FindAll(x => x.score == biggestScore && x.isAlive == true);

            if (draw.Count != 0 && draw.Count >= 2)
            {
                RPG.endGame.epilogue(draw);

            }
            else
            {
                var battleAmos = characters.FindAll(x => x.isDraw == true);

                if (battleAmos.Count != 0)
                {
                    Console.WriteLine();
                    Console.WriteLine();
                    Console.WriteLine(" ------------------------------------------------------------------------------- ");
                    Console.WriteLine("|                                    A FUGA!                                    |");
                    Console.WriteLine("|-------------------------------------------------------------------------------|");
                    Console.WriteLine("|                                                                               |");
                    Console.WriteLine("|     Percebendo que não irá escapar e nem te derrotar, ele tenta fugir. Porém, |");
                    Console.WriteLine("| devido ao tempo de prova, os professores decidem ir atrás de vocês para ver   |");
                    Console.WriteLine("| se há algum problema, dão de cara com ele e o prendem.                        |");
                    Console.WriteLine("|                                                                               |");
                    Console.WriteLine("|     Os professores ficam surpresos por você ter sobrevivido ao combate e      |");
                    Console.WriteLine("| certamente lembrarão disso.                                                   |");
                    Console.WriteLine("|                                                                               |");
                    Console.WriteLine(" ------------------------------------------------------------------------------- ");
                    Console.WriteLine();
                    Console.WriteLine();
                }

                foreach (var winner in characters)
                {
                    for (int i = 0; i < characters.Count; i++)
                    {

                        if (biggestScore < characters[i].score)
                        {
                            biggestScore = characters[i].score;
                        }

                    }

                    if (winner.score == biggestScore && winner.isAlive == true)
                    {
                        Console.WriteLine($"Parabéns, {winner.name}! Você foi o vencedor do Torneio Tribuxo!");
                        Console.WriteLine($"Sua pontuação final foi: {winner.score}!");
                        Drawings.trophy();
                    }

                }


                RPG.endGame.endTheGame(characters);
            }

        }
    }

}